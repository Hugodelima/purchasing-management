
<main class="container">

	<h3 class="mt-3">Listagem de Compra</h3>
	<a class="btn btn-primary mt-5" href ="/menu/compras/cadastrar">
		<button type="button" class="btn btn-primary">+ Adicionar Compra</button>
	</a>
    
  <div class="table-responsive mt-5">
    <table class="table table-bordered text-center text-capitalize">
      <tr class="bg-primary table-active text-uppercase text-white">
        <th scope="col">Código da Compra</th>
        <th scope="col">Código do Fornecedor</th>
        <th scope="col">Itens da Compra</th>
        <th scope="col">Quantidade Total</th>
        <th scope="col">Valor Total</th>
        <th scope="col">Data da Compra</th>
        <th scope="col">Alterar</th>
		    <th scope="col">Detalhe</th>
        <th scope="col">Excluir</th>
      </tr>
      {{#if lista_Compra}}
        {{#each lista_Compra}}
          <tr>
            <td>{{this.id}}</td>
            <td>{{this.fornecedorId}}</td>
            <td>
              <a href="compras/itemcompra/cadastrar/{{this.id}}">
                <i class="bi bi-clipboard-data-fill" style="font-size:30px;"></i>
              </a>
            </td>
            <td>{{this.quantidadeTotal}}</td>
            <td>{{this.valorTotal}}</td>
            <td>{{pegarData this.dataCompra}}</td>
            <td>
                <a href='compras/alterar/{{this.id}}'>
                  <i class="btn btn-link bi bi-pencil-square"style="font-size:30px"></i>
			          </a>
            </td>
            <td>
                <a href='compras/{{this.id}}'>
                  <i class="btn btn-link bi bi-clipboard-fill" style="font-size:30px"></i>
                </a>  
            </td>       
            <td>
              <button type="button" class="btn btn-link" data-toggle="modal" data-target="#exampleModal{{this.id}}">
                <i class="bi bi-trash3-fill"style="font-size:30px"></i>
              </button>

              <!-- Modal -->
              <div class="modal" id="exampleModal{{this.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                  <h5 class="modal-title textoNormal">Exclusão de Compra</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  </div>
                  <div class="modal-body m-1">
                    <p class="textoNormal">Tem certeza que deseja excluir esta compra junto com os itens?</p>
                  </div>
                  <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                  <a href="compras/remover/{{this.id}}">
                    <button type="button" class="btn btn-primary">Confirmar</button>
                  </a>
                  </div>
                </div>
                </div>
              </div>       
            </td>
          </tr>
        {{/each}}
      {{else}}
      <tr>
        <td colspan="10">Não há compras</td>
      </tr>
      {{/if}}
        
    </table>
  </div>
  <a href="/menu">
    <button type="button" class="btn btn-primary mt-2">Voltar</button>
  </a>
</main>

